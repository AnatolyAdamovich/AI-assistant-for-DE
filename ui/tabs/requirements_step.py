import sys
import os

# –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ src –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞
src_path = os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..'))
if src_path not in sys.path:
    sys.path.append(src_path)

import streamlit as st
from src.core.llm_generators.specification import AnalyticsSpecGenerator

st.markdown(
    "<h1 style='display: flex; align-items: center;'>"
    "<img src='https://cdn-icons-png.flaticon.com/128/9732/9732800.png' width='70' style='margin-right: 10px'/>"
    "–®–∞–≥ 1: –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã"
    "</h1>",
    unsafe_allow_html=True
)

with st.expander("–ü–æ–¥—Ä–æ–±–Ω–µ–µ"):
    st.markdown("""
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–∏—Å–∞–Ω–∏—è:**

- **–ù–∞–∑–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞:**  
  –ù–∞–ø—Ä–∏–º–µ—Ä: *–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞*

- **–¶–µ–ª–∏ –∏ —Å—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã:**  
  –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞? –ö—Ç–æ –±—É–¥–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏?  
  –ù–∞–ø—Ä–∏–º–µ—Ä: *–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–¥–∞–∂. –°—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä—ã ‚Äî –æ—Ç–¥–µ–ª –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ.*

- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤:**  
  –ö–∞–∫ —á–∞—Å—Ç–æ –¥–æ–ª–∂–Ω—ã —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –æ—Ç—á–µ—Ç—ã?  
  –ù–∞–ø—Ä–∏–º–µ—Ä: *–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 15:00, –∫–∞–∂–¥—ã–π —á–∞—Å, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–æ –≤—Ç–æ—Ä–Ω–∏–∫–∞–º –∏ —Ç.–¥.*

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**  
  –ï—Å—Ç—å –ª–∏ –¥–µ–¥–ª–∞–π–Ω—ã, —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è?  
  –ù–∞–ø—Ä–∏–º–µ—Ä: *–°–æ–±–ª—é–¥–∞—Ç—å GDPR, –æ—Ç—á–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã –∫ 10:00, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö.*

- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**  
  –û–ø–∏—à–∏—Ç–µ, –æ—Ç–∫—É–¥–∞ –±—É–¥—É—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–ë–î, API, —Ñ–∞–π–ª—ã –∏ —Ç.–¥.), –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –ø—Ä–∏–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü –∏–ª–∏ –ø–æ–ª–µ–π.

- **–ñ–µ–ª–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:**  
  –ö–∞–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –≤ –æ—Ç—á–µ—Ç–∞—Ö? –ù—É–∂–Ω—ã –ª–∏ –∫–∞–∫–∏–µ-—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á–µ—Ç—ã –∏–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö?

---

**–ß–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤—ã –æ–ø–∏—à–µ—Ç–µ –∑–∞–¥–∞—á—É, —Ç–µ–º —Ç–æ—á–Ω–µ–µ –∏ –ø–æ–ª–µ–∑–Ω–µ–µ –±—É–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç!**
    """)

business_desc = st.text_area("–û–ø–∏—à–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É", height=300)
if st.button("–ó–∞–ø—É—Å–∫ AI üöÄ"):
    with st.spinner("–û–±—Ä–∞–±–æ—Ç–∫–∞ ..."):
        analytics_spec_generated = AnalyticsSpecGenerator(model="just-ai/yandexgpt/yandexgpt/rc").generate_spec(business_desc)
    st.success("–û–±—ä–µ–∫—Ç AnalyticsSpec —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!")
    with st.expander("–ü–æ–∫–∞–∑–∞—Ç—å AnalyticsSpec"):
      st.json(analytics_spec_generated.model_dump())
